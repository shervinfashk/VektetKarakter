<!DOCTYPE html>

<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VektetKarakterer</title>
    <link href="./styles.css" rel="stylesheet">
    <script src="myscripts.js" type="text/javascript"></script>

    <script>
        var oppnaddeKarakterer = [];
        var varslet = false;
    </script>

    <script>

        class VektetKarakterer {
            constructor(poeng, vekting) {
                this.poeng = poeng;
                this.vekting = vekting;
            }

            hentVekting() {
                return this.vekting;
            }

            hentPoeng() {
                return this.poeng;
            }

            hentVektetKarakter() {
                return (this.poeng * this.vekting) / 100;
            }

            toString() {
                return "Poeng: " + this.poeng + ", vekting: " + this.vekting;
            }
        }

    </script>

    <script>
        function skrivUtVektet() {
            let list = document.getElementById("oversiktOverKarakterer");

            while (list.firstChild) {
                list.firstChild.remove()
            }

            if (oppnaddeKarakterer.length < 1) {
                return;
            }



            let karakter = oppnaddeKarakterer[0];
            let li = document.createElement('p');
            li.innerText = "Oppn친dde poeng p친 midtveiseksamen: " + karakter.hentPoeng();
            list.appendChild(li);
            list.style.backgroundColor = "#fdb347CC";
            list.classList.add("rounded-lg");

        }

    </script>

    <script>
        function lagVektetKarakter() {
            var vekting = parseFloat(document.getElementById("vekting").value);
            var poeng = parseFloat(document.getElementById("poeng").value);

            if ((vekting > 100 || vekting < 0) || (poeng > 100 || poeng < 0) || isNaN(poeng)) {
                alert("Poengsummen kan ikke v칝re mindre enn 0 eller st칮rre enn 100!");
                return;
            }

            if (oppnaddeKarakterer.length > 0) {
                alert("Du har allerede bekreftet din karakteren din for midtveiseksamen. For 친 endre m친 du fjerne karakteren f칮rst.");
                return;
            }

            var vk = new VektetKarakterer(poeng, vekting);
            oppnaddeKarakterer.push(vk);

            let knapp = document.createElement('button');
            knapp.onclick = fjernKarakter;
            knapp.type = 'button';
            knapp.className = 'btn btn-danger';
            knapp.textContent = 'Fjern karakter';

            let buttonContainer = document.getElementById('lageVektetKarakter');
            buttonContainer.appendChild(knapp);

            skrivUtVektet();


        }
    </script>

    <script>

        function fjernKarakter() {

            if (oppnaddeKarakterer.length < 1) {
                alert("Det finnes ingen karakterer 친 fjerne. Du m친 f칮rst bekrefte en poengsum!");
            }

            var select = document.getElementById('lageVektetKarakter');
            select.removeChild(select.lastChild);

            oppnaddeKarakterer.pop();
            let list = document.getElementById("oversiktOverKarakterer");
            list.style.backgroundColor = "";

            skrivUtVektet();

        }

    </script>

    <script>
        function regnUtH칮yestePoengMulig(sistePoengSum) {

            if (oppnaddeKarakterer.length < 1 && !(varslet)) {
                alert("Husk 친 legge til oppn친dd karakter fra midtveiseksamen!")
                varslet = true;
            }

            var totalVekting = 0;
            var totalSum = 0;

            oppnaddeKarakterer.forEach(myFunction);

            function myFunction(verdi) {
                totalSum += verdi.hentVektetKarakter();
                totalVekting += verdi.hentVekting();
            }

            var sistePoeng = new VektetKarakterer(sistePoengSum, 100 - totalVekting);
            return totalSum + sistePoeng.hentVektetKarakter();
        }
    </script>



    <meta charset="UTF-8">

</head>



<body>

    <div class="wrapper">

        <div class="content">

            <header class="header">
                <h1>Utregning av karakter i IN1010</h1>
            </header>

            <div class="lageVektetKarakter" id="lageVektetKarakter">
                <p style="display:flex; justify-content: center; align-content: center;">Hva fikk du p친 midtveis?</p>
                <div class="form-floating mb-3">
                    <input type="number" min="0" max="100" class="form-control" id="poeng" name="poeng"
                        placeholder="87">
                    <label for="poeng">Poengsum</label>
                </div>
                <abbr title="I IN1010 utgj칮r midtveiseksamen 25% av karakteren">游띋</abbr>
                <div class="form-floating mb-3">
                    <input type="number" value="25" min="0" max="100" class="form-control" id="vekting" name="vekting"
                        placeholder="Hvor mange % karakteren teller" disabled>
                    <label for="vekting">Vekting</label>
                </div>


                <button onclick="lagVektetKarakter()" type="button" class="btn btn-primary">Bekreft poengsum</button>

            </div>

            <div class="oversiktOverKarakterer rounded-3" id="oversiktOverKarakterer">

            </div>


            <div class="regnUtHoyestMulig">


                <div class="slidecontainer">
                    <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
                    <p>Karakter p친 hovedeksamen: <span id="sistePoengSum"></span></p>
                    <p>Endelig poengsum i faget: <span id="besteKarakterMulig"></span></p>
                </div>





                <script>

                    var slider = document.getElementById("myRange");
                    var output = document.getElementById("besteKarakterMulig");
                    var siste = document.getElementById("sistePoengSum");
                    siste.innerHTML = slider.value


                    slider.oninput = function () {
                        siste.innerHTML = slider.value;
                        output.innerHTML = regnUtH칮yestePoengMulig(slider.value);
                    }


                </script>

            </div>



        </div>
        <footer>
            <p>&copy; 2023 IP-adressekonverteringsprogrammet. Alle rettigheter reservert. Laget av <a
                    href="https://github.com/shervinfashk" style="color: #fff;">Shervin Fashkhami</a>.</p>
        </footer>
    </div>

</body>





</html>