<!DOCTYPE html>

<html lang="en">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VektetKarakterer</title>
    <link href="./styles.css" rel="stylesheet">
    <script src="myscripts.js" type="text/javascript"></script>

    <script>
        var oppnaddeKarakterer = [];
    </script>

    <script>

        class VektetKarakterer {
            constructor(poeng, vekting) {
                this.poeng = poeng;
                this.vekting = vekting;
            }

            hentVekting() {
                return this.vekting;
            }

            hentVektetKarakter() {
                return (this.poeng * this.vekting) / 100;
            }

            toString() {
                return "Poeng: " + this.poeng + ", vekting: " + this.vekting;
            }
        }

    </script>

    <script>
        function skrivUtVektet() {
            let list = document.getElementById("myList");

            let li = document.createElement('li');
            li.innerText = oppnaddeKarakterer[oppnaddeKarakterer.length - 1].toString();
            list.appendChild(li);
        }

    </script>

    <script>
        function lagVektetKarakter() {
            var vekting = parseFloat(document.getElementById("vekting").value);
            var poeng = parseFloat(document.getElementById("poeng").value);

            var vk = new VektetKarakterer(poeng, vekting);

            oppnaddeKarakterer.push(vk);
            skrivUtVektet();
        }
    </script>

    <script>
        function regnUtHøyestePoengMulig(sistePoengSum) {
            var totalVekting = 0;
            var totalSum = 0;

            oppnaddeKarakterer.forEach(myFunction);

            function myFunction(verdi) {
                totalSum += verdi.hentVektetKarakter();
                totalVekting += verdi.hentVekting();
            }

            var sistePoeng = new VektetKarakterer(sistePoengSum, 100 - totalVekting);
            return totalSum + sistePoeng.hentVektetKarakter();
        }
    </script>

</head>


<body>

    <header class="header">
        <h1>Utregning av karakter i IN1010</h1>
    </header>

    <div class="lageVektetKarakter">
        <p style="display:flex; justify-content: center; align-content: center;">Hva fikk du på midtveis?</p>
        <div class="form-floating mb-3">
            <input type="number" min="0" max="100" class="form-control" id="poeng" name="poeng" placeholder="87">
            <label for="poeng">Poengsum</label>
        </div>
        <div class="form-floating">
            <input type="number" value="25" min="0" max="100" class="form-control" id="vekting" name="vekting"
                placeholder="Hvor mange % karakteren teller">
            <label for="floatingPassword">Vekting</label>
        </div>


        <button onclick="lagVektetKarakter()" type="button" class="btn btn-primary">Bekreft poengsum og vekting</button>



    </div>


    <div class="regnUtHoyestMulig">


        <div class="slidecontainer">
            <input type="range" min="1" max="100" value="50" class="slider" id="myRange">
            <p>Karakter på hovedeksamen: <span id="sistePoengSum"></span></p>
            <p>Endelig poengsum i faget: <span id="besteKarakterMulig"></span></p>
        </div>





        <script>

            var slider = document.getElementById("myRange");
            var output = document.getElementById("besteKarakterMulig");
            var siste = document.getElementById("sistePoengSum");
            siste.innerHTML = slider.value


            slider.oninput = function () {
                siste.innerHTML = slider.value;
                output.innerHTML = regnUtHøyestePoengMulig(slider.value);
            }


        </script>

    </div>

    <div class="oversiktOverKarakterer">
        <ul id="myList"></ul>
    </div>



</body>


<footer>

</footer>

</html>